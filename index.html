<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Math Practice App</title>
  <style>
    /* Import a friendly font from Google Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap');

    /* Global Styles */
    body {
    font-family: 'Poppins', sans-serif;
    background: #f8f9fc; /* Soft off-white with a slight blue tint */
    margin: 0;
    padding: 20px;
    color: #2d2d2d;
    text-align: center;
    }

    /* Cute Icon for Header */
    h1::before {
    content: "ðŸŒˆ ";
    }

    h1 {
    color: #344e34;
    font-weight: 600;
    font-size: 26px;
    }

    /* Main Container */
    .container {
    max-width: 600px;
    margin: 40px auto;
    background: #ffffff;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 6px 20px rgba(128, 128, 255, 0.15); /* Soft purple-blue shadow */
    transition: transform 0.3s ease;
    }

    .container:hover {
    transform: scale(1.02);
    }

    /* Dropdown */
    label {
    font-weight: 500;
    color: #555;
    display: block;
    font-size: 16px;
    margin-bottom: 8px;
    }

    select {
    width: 100%;
    padding: 10px;
    border: 2px solid #7fa8f8; /* Blue accent */
    border-radius: 8px;
    background-color: #ffffff;
    font-size: 16px;
    outline: none;
    cursor: pointer;
    transition: 0.3s;
    }

    select:hover {
    background: #eef5ff;
    }

    /* Problem Box */
    .problem-container {
    background-color: #ffffff;
    border: 2px solid #7cc383; /* Green accent */
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0px 4px 10px rgba(255, 165, 0, 0.1); /* Warm orange highlight */
    }

    /* Add a subtle doodle */
    .problem-container::before {
    content: "ðŸ“š"; /* Book emoji for learning theme */
    font-size: 18px;
    display: block;
    margin-bottom: 10px;
    color: #ffb84d;
    }

    #problemText {
    font-size: 18px;
    font-weight: 500;
    color: #2d5a2d;
    margin-bottom: 15px;
    }

    /* Input Field */
    input[type="text"] {
    width: calc(100% - 20px);
    padding: 12px;
    font-size: 16px;
    border: 2px solid #7cc383;
    border-radius: 8px;
    outline: none;
    transition: 0.3s;
    }

    input[type="text"]:focus {
    border-color: #ffab40; /* Warm orange focus */
    background: #fffaf0; /* Soft warm tone */
    }

    /* Buttons */
    button {
    padding: 12px 18px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    font-weight: 500;
    }

    /* More diverse colors for buttons */
    #submitAnswer {
    background: #4d88ff; /* Blue primary */
    color: #ffffff;
    }

    #submitAnswer:hover {
    background: #3a6ee8;
    }

    #nextProblem {
    background: #f28544; /* Warm orange */
    color: #ffffff;
    }

    #nextProblem:hover {
    background: #d9733b;
    }

    /* Feedback Messages */
    .feedback {
    font-size: 16px;
    margin-top: 12px;
    font-weight: bold;
    }

    .feedback.correct {
    color: #1c7d1c;
    }

    .feedback.incorrect {
    color: #b22222;
    }

    /* Score Tracker */
    .score {
    text-align: center;
    margin-top: 20px;
    font-size: 16px;
    font-weight: 500;
    color: #2d6a2d;
    }

    /* Cute floating stars animation */
    @keyframes floatingStars {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
    }

    .star {
    display: inline-block;
    font-size: 20px;
    animation: floatingStars 3s infinite ease-in-out;
    margin-left: 5px;
    color: #ffcc00; /* Gold stars */
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Math Practice App</h1>

    <!-- Select Problem Type -->
    <div>
      <label for="problemType">Select Problem Type: </label>
      <select id="problemType">
        <option value="basicArithmetic">Basic Arithmetic</option>
        <option value="orderOfOperations">Order of Operations</option>
        <option value="fractionsDecimals">Fractions and Decimals</option>
        <option value="ratiosProportions">Ratios and Proportions</option>
        <option value="percentageProblems">Percentage Problems</option>
        <option value="unitConversions">Unit Conversions</option>
        <option value="timeMoneyWord">Time and Money Word Problems</option>
        <option value="algebraicExpressions">Evaluating Algebraic Expressions</option>
        <option value="solvingForX">Solving for x (Linear Equations)</option>
      </select>
    </div>

    <!-- Problem Area -->
    <div class="problem-container">
      <div id="problemText"></div>
      <input type="text" id="answerInput" placeholder="Your answer" />
      <div>
        <button id="submitAnswer">Submit Answer</button>
        <button id="nextProblem">Next Problem</button>
      </div>
      <div class="feedback" id="feedback"></div>
      <div class="hint" id="hint"></div>
    </div>

    <!-- Score Tracking -->
    <div class="score" id="scoreDisplay">
      Score: 0 correct out of 0 attempted.
    </div>
  </div>

  <script>
    // Global variables for score tracking and current problem/answer.
    let correctCount = 0;
    let attemptedCount = 0;
    let currentAnswer = null;
    let currentProblem = {};

    // Update score display.
    function updateScore() {
      document.getElementById('scoreDisplay').textContent =
        `Score: ${correctCount} correct out of ${attemptedCount} attempted.`;
    }

    // Helper functions for random number generation.
    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function randomFloat(min, max, decimals = 2) {
      const factor = Math.pow(10, decimals);
      return Math.round((Math.random() * (max - min) + min) * factor) / factor;
    }

    // ***************************
    // Problem Generator Functions
    // ***************************

    // 1. Basic Arithmetic (Addition, Subtraction, Multiplication, Division)
    function generateBasicArithmetic() {
      const operators = ['+', '-', '*', '/'];
      const op = operators[randomInt(0, operators.length - 1)];
      let num1 = randomFloat(1, 100, 2);
      let num2 = randomFloat(1, 100, 2);
      if (op === '/') {
        num2 = randomFloat(1, 10, 2); // simpler divisor for division
      }
      const problemText = `${num1} ${op} ${num2} = ?`;
      let answer;
      switch (op) {
        case '+':
          answer = num1 + num2;
          break;
        case '-':
          answer = num1 - num2;
          break;
        case '*':
          answer = num1 * num2;
          break;
        case '/':
          answer = num1 / num2;
          break;
      }
      answer = parseFloat(answer.toFixed(2));
      return {
        problemText,
        answer,
        explanation: `Computed as ${num1} ${op} ${num2} = ${answer}.`
      };
    }

    // 2. Order of Operations (PEMDAS)
    function generateOrderOfOperations() {
      // Example: a - b Ã· c Ã— d = ?
      const a = randomInt(10, 50);
      const b = randomInt(10, 50);
      const c = randomInt(1, 10);
      const d = randomInt(1, 10);
      const problemText = `${a} - ${b} Ã· ${c} Ã— ${d} = ?`;
      let intermediate = (b / c) * d;
      let answer = a - intermediate;
      answer = parseFloat(answer.toFixed(2));
      return {
        problemText,
        answer,
        explanation: `First compute ${b} Ã· ${c} = ${(b / c).toFixed(2)}, then multiply by ${d} to get ${(b / c * d).toFixed(2)}. Finally, subtract from ${a} to obtain ${answer}.`
      };
    }

    // 3. Fractions and Decimals (Conversion between formats)
    function generateFractionsDecimals() {
      const conversionType = Math.random() < 0.5 ? 'fractionToDecimal' : 'decimalToFraction';
      if (conversionType === 'fractionToDecimal') {
        const numerator = randomInt(1, 10);
        const denominator = randomInt(numerator + 1, 15); // ensures a fraction less than 1
        const decimalVal = parseFloat((numerator / denominator).toFixed(2));
        const percentVal = Math.round(decimalVal * 100);
        const problemText = `Express ${numerator}/${denominator} as a decimal and percent. (Format: decimal, percent)`;
        return {
          problemText,
          answer: `${decimalVal}, ${percentVal}%`,
          explanation: `${numerator}/${denominator} = ${decimalVal} and ${decimalVal} Ã— 100 = ${percentVal}%.`
        };
      } else {
        const decimalVal = randomFloat(0.1, 0.9, 2);
        // Use a denominator of 100 to approximate then simplify.
        let denominator = 100;
        let numerator = Math.round(decimalVal * denominator);
        function gcd(a, b) { return b === 0 ? a : gcd(b, a % b); }
        const divisor = gcd(numerator, denominator);
        numerator = numerator / divisor;
        denominator = denominator / divisor;
        const percentVal = Math.round(decimalVal * 100);
        const problemText = `Convert ${decimalVal} to a fraction and percent. (Format: fraction, percent)`;
        return {
          problemText,
          answer: `${numerator}/${denominator}, ${percentVal}%`,
          explanation: `${decimalVal} = ${numerator}/${denominator} and ${decimalVal} Ã— 100 = ${percentVal}%.`
        };
      }
    }

    // 4. Ratios and Proportions
    function generateRatiosProportions() {
      const a = randomInt(1, 20);
      const b = randomInt(1, 20);
      const problemText = `${a}:${b} :: x:100. Solve for x.`;
      const answer = parseFloat(((a * 100) / b).toFixed(2));
      return {
        problemText,
        answer,
        explanation: `x = (a Ã— 100) / b = (${a} Ã— 100) / ${b} = ${answer}.`
      };
    }

    // 5. Percentage Problems
    function generatePercentageProblems() {
      if (Math.random() < 0.5) {
        // Hospital births problem.
        const births = randomInt(50, 100);
        const percentGirls = randomInt(40, 60);
        const percentBoys = 100 - percentGirls;
        const problemText = `A hospital had ${births} births, and ${percentGirls}% were girls. How many were boys?`;
        const boys = Math.round(births * percentBoys / 100);
        return {
          problemText,
          answer: boys,
          explanation: `Number of boys = ${births} Ã— (${percentBoys}/100) = ${boys}.`
        };
      } else {
        // Coffee reduction problem.
        const coffee = randomInt(20, 50);
        const reduction = randomInt(10, 30);
        const problemText = `A patient normally drinks ${coffee} oz of coffee daily but needs to reduce by ${reduction}%. How many ounces can they drink now?`;
        const reduced = parseFloat((coffee * (1 - reduction / 100)).toFixed(2));
        return {
          problemText,
          answer: reduced,
          explanation: `Reduced amount = ${coffee} Ã— (1 - ${reduction}/100) = ${reduced} oz.`
        };
      }
    }

        // 6. Unit Conversions (Updated)
    function generateUnitConversions() {
    // Conversion types:
    // 0: Quarts to Pints (1 quart = 2 pints)
    // 1: Pints to Cups (1 pint = 2 cups)
    // 2: Cups to Fluid Ounces (1 cup = 8 fl oz)
    // 3: Fluid Ounces to Milliliters (1 fl oz = 29.5735 mL)
    // 4: Milliliters to Liters (1000 mL = 1 L)
    // 5: Quarts to Liters (1 quart = 0.946353 L)
    const type = randomInt(0, 5);
    let problemText = "";
    let answer;
    let explanation = "";

    switch (type) {
        case 0: {
        // Quarts to Pints
        const quarts = randomFloat(1, 10, 2);
        const pints = parseFloat((quarts * 2).toFixed(2));
        problemText = `Convert ${quarts} quart${quarts !== 1 ? "s" : ""} to pints.`;
        answer = pints;
        explanation = `${quarts} quart${quarts !== 1 ? "s" : ""} Ã— 2 = ${pints} pints.`;
        break;
        }
        case 1: {
        // Pints to Cups
        const pints = randomFloat(1, 10, 2);
        const cups = parseFloat((pints * 2).toFixed(2));
        problemText = `Convert ${pints} pint${pints !== 1 ? "s" : ""} to cups.`;
        answer = cups;
        explanation = `${pints} pint${pints !== 1 ? "s" : ""} Ã— 2 = ${cups} cups.`;
        break;
        }
        case 2: {
        // Cups to Fluid Ounces
        const cups = randomFloat(1, 10, 2);
        const flOz = parseFloat((cups * 8).toFixed(2));
        problemText = `Convert ${cups} cup${cups !== 1 ? "s" : ""} to fluid ounces.`;
        answer = flOz;
        explanation = `${cups} cup${cups !== 1 ? "s" : ""} Ã— 8 = ${flOz} fluid ounces.`;
        break;
        }
        case 3: {
        // Fluid Ounces to Milliliters
        const flOz = randomFloat(1, 10, 2);
        const mL = parseFloat((flOz * 29.5735).toFixed(2));
        problemText = `Convert ${flOz} fluid ounce${flOz !== 1 ? "s" : ""} to milliliters.`;
        answer = mL;
        explanation = `${flOz} fl oz Ã— 29.5735 â‰ˆ ${mL} mL.`;
        break;
        }
        case 4: {
        // Milliliters to Liters
        const mL = randomFloat(100, 1000, 0);
        const liters = parseFloat((mL / 1000).toFixed(2));
        problemText = `Convert ${mL} milliliters to liters.`;
        answer = liters;
        explanation = `${mL} mL Ã· 1000 = ${liters} L.`;
        break;
        }
        case 5: {
        // Quarts to Liters
        const quarts = randomFloat(1, 10, 2);
        const liters = parseFloat((quarts * 0.946353).toFixed(2));
        problemText = `Convert ${quarts} quart${quarts !== 1 ? "s" : ""} to liters.`;
        answer = liters;
        explanation = `${quarts} quart${quarts !== 1 ? "s" : ""} Ã— 0.946353 â‰ˆ ${liters} liters.`;
        break;
        }
    }

    return {
        problemText,
        answer,
        explanation
    };
    }

    // 7. Time and Money Word Problems
    function generateTimeMoneyWord() {
      // Worker with variable hours over a 5â€‘day week.
      const wage = randomFloat(10, 20, 2);
      let totalHours = 0;
      let hoursDetails = [];
      for (let i = 0; i < 5; i++) {
        const hours = randomFloat(4, 10, 1);
        totalHours += hours;
        hoursDetails.push(hours);
      }
      totalHours = parseFloat(totalHours.toFixed(1));
      const totalWage = parseFloat((totalHours * wage).toFixed(2));
      const problemText = `A worker earns $${wage}/hour and worked ${hoursDetails.join(
        ", "
      )} hours from Monday to Friday. Calculate their total weekly wage.`;
      return {
        problemText,
        answer: totalWage,
        explanation: `Total hours = ${totalHours}. Total wage = ${totalHours} Ã— $${wage} = $${totalWage}.`
      };
    }

    // 8. Evaluating Algebraic Expressions
    function generateAlgebraicExpressions() {
      // Expression: axÂ² + bxy + cyÂ² + d for given x and y.
      const a = randomInt(1, 5);
      const b = randomInt(-5, 5);
      const c = randomInt(-5, 5);
      const d = randomInt(-10, 10);
      const x = randomInt(-5, 5);
      const y = randomInt(-5, 5);
      const problemText = `Evaluate ${a}xÂ² ${b >= 0 ? "+ " + b + "xy" : "- " + Math.abs(b) + "xy"} ${c >= 0 ? "+ " + c + "yÂ²" : "- " + Math.abs(c) + "yÂ²"} ${d >= 0 ? "+ " + d : "- " + Math.abs(d)} for x = ${x} and y = ${y}.`;
      let answer = a * x * x + b * x * y + c * y * y + d;
      return {
        problemText,
        answer,
        explanation: `Substitute x = ${x} and y = ${y} into the expression to get ${a}Ã—${x}Â² + ${b}Ã—${x}Ã—${y} + ${c}Ã—${y}Â² + ${d} = ${answer}.`
      };
    }

    // 9. Solving for x (Linear Equations)
    function generateSolvingForX() {
      // Randomly choose from several forms.
      const type = randomInt(0, 3);
      let problemText = "";
      let answer;
      let explanation = "";
      if (type === 0) {
        // Example: 2x - 3 = 17.
        const coeff = randomInt(1, 10);
        const constant = randomInt(1, 20);
        const rhs = randomInt(20, 50);
        problemText = `Solve for x: ${coeff}x - ${constant} = ${rhs}.`;
        answer = (rhs + constant) / coeff;
        explanation = `Add ${constant} to both sides: ${coeff}x = ${rhs + constant}. Then, divide by ${coeff}: x = (${rhs + constant})/${coeff} = ${answer}.`;
      } else if (type === 1) {
        // Example: 3 - 4x = 27.
        const constant = randomInt(1, 20);
        const coeff = randomInt(1, 10);
        const rhs = randomInt(20, 50);
        problemText = `Solve for x: ${constant} - ${coeff}x = ${rhs}.`;
        answer = (constant - rhs) / coeff;
        explanation = `Subtract ${constant} from both sides: -${coeff}x = ${rhs - constant}. Then divide by -${coeff}: x = (${constant} - ${rhs})/${coeff} = ${answer}.`;
      } else if (type === 2) {
        // Example: 2 - (x - 4) = 8.
        const constant1 = randomInt(1, 10);
        const constant2 = randomInt(1, 10);
        const rhs = randomInt(10, 20);
        problemText = `Solve for x: ${constant1} - (x - ${constant2}) = ${rhs}.`;
        answer = constant1 + constant2 - rhs;
        explanation = `Expand: ${constant1} - x + ${constant2} = ${rhs}. Then, x = ${constant1} + ${constant2} - ${rhs} = ${answer}.`;
      } else {
        // Identity example: 2(3x - 4) = 6x - 8 (infinite solutions).
        const multiplier = randomInt(1, 5);
        const coeffInside = randomInt(1, 10);
        const constantInside = randomInt(1, 20);
        problemText = `Solve for x: ${multiplier}(${coeffInside}x - ${constantInside}) = ${multiplier *
          coeffInside}x - ${multiplier * constantInside}. (Identify number of solutions: 0, 1, or infinite.)`;
        answer = "infinite";
        explanation = `Both sides simplify to the same expression, meaning there are infinitely many solutions.`;
      }
      if (typeof answer === "number") {
        answer = parseFloat(answer.toFixed(2));
      }
      return { problemText, answer, explanation };
    }

    // **************************************
    // Generate a new problem based on the type.
    // **************************************
    function generateProblem() {
      const problemType = document.getElementById("problemType").value;
      let problemObj;
      switch (problemType) {
        case "basicArithmetic":
          problemObj = generateBasicArithmetic();
          break;
        case "orderOfOperations":
          problemObj = generateOrderOfOperations();
          break;
        case "fractionsDecimals":
          problemObj = generateFractionsDecimals();
          break;
        case "ratiosProportions":
          problemObj = generateRatiosProportions();
          break;
        case "percentageProblems":
          problemObj = generatePercentageProblems();
          break;
        case "unitConversions":
          problemObj = generateUnitConversions();
          break;
        case "timeMoneyWord":
          problemObj = generateTimeMoneyWord();
          break;
        case "algebraicExpressions":
          problemObj = generateAlgebraicExpressions();
          break;
        case "solvingForX":
          problemObj = generateSolvingForX();
          break;
        default:
          problemObj = {
            problemText: "Problem type not found.",
            answer: null,
            explanation: ""
          };
      }
      currentProblem = problemObj;
      currentAnswer = problemObj.answer;
      document.getElementById("problemText").textContent = problemObj.problemText;
      document.getElementById("feedback").textContent = "";
      document.getElementById("hint").textContent = "";
      document.getElementById("answerInput").value = "";
    }

    // **************************************
    // Check the user's answer.
    // **************************************
    function checkAnswer() {
  const userAnswerRaw = document.getElementById("answerInput").value.trim();
  const feedbackElem = document.getElementById("feedback");
  let isCorrect = false;

  // Check if the current answer is a number and compare numerically.
  if (typeof currentAnswer === "number") {
    const userAnswer = parseFloat(userAnswerRaw);
    if (!isNaN(userAnswer) && Math.abs(userAnswer - currentAnswer) < 0.01) {
      isCorrect = true;
    }
  } else {
    // For string answers, compare ignoring case.
    if (userAnswerRaw.toLowerCase() === currentAnswer.toString().toLowerCase()) {
      isCorrect = true;
    }
  }
  
  attemptedCount++;

  if (isCorrect) {
    correctCount++;
    // Array of 20 motivational messages for Cassie.
    const motivationMessages = [
      "Great job, Cassie! Keep it up!",
      "Excellent work, Cassie! You're doing amazing!",
      "Awesome, Cassie! Your math skills are on point!",
      "Way to go, Cassie! Every problem conquered!",
      "Fantastic effort, Cassie! Keep shining!",
      "You're a math superstar, Cassie! Well done!",
      "Brilliant work, Cassie! You're making progress!",
      "Keep rocking it, Cassie! You're unstoppable!",
      "Outstanding, Cassie! Your hard work shows!",
      "Superb, Cassie! Every answer counts!",
      "You're crushing it, Cassie! Keep the momentum!",
      "Impressive, Cassie! Your skills keep growing!",
      "Kudos, Cassie! Your dedication is inspiring!",
      "Amazing job, Cassie! Keep challenging yourself!",
      "Remarkable, Cassie! You're a problem-solving pro!",
      "Keep it up, Cassie! You're mastering these problems!",
      "You did it, Cassie! Another one down!",
      "Incredible work, Cassie! You're on the right track!",
      "Bravo, Cassie! Your efforts are paying off!",
      "Fantastic, Cassie! You're truly talented!"
    ];
    // Select a random motivational message.
    const randomIndex = randomInt(0, motivationMessages.length - 1);
    const message = motivationMessages[randomIndex];
    
    feedbackElem.textContent = "Correct! " + message;
    feedbackElem.style.color = "green";
  } else {
    feedbackElem.textContent = `Incorrect. ${currentProblem.explanation}`;
    feedbackElem.style.color = "red";
  }
  
  updateScore();
}

    // Event listeners for buttons and dropdown.
    document.getElementById("submitAnswer").addEventListener("click", checkAnswer);
    document.getElementById("nextProblem").addEventListener("click", generateProblem);
    document.getElementById("problemType").addEventListener("change", generateProblem);

    // Generate an initial problem when the page loads.
    generateProblem();
  </script>
</body>
</html>
